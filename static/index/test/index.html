<html>
<head>
    <title>API测试页</title>
    <style>
        li{
            list-style: none;
        }
        .fl{
            float:left;
        }
        #left{
            width:350px;
        }
        #right{
            width:750px;
        }
        #resultiframe{
            width: 650px;
            height: 500px;
        }
        .submitbutton {
            width: 150px;
            height: 40px;
            margin-left: 4px;
        }
    </style>
    <script src="http://code.jquery.com/jquery.min.js"></script>
</head>
<body>
<div id="left" class="fl">
<h2>API测试页</h2>
<h3>表单</h3><span style="color: gray;font-size: 12px;">tips:按Enter键可以快速“ajax提交”</span>
<form id="testform" method="post" enctype="multipart/form-data" action="/api/groups/avatar/update">
    url:<input type="text" id="url"/><br/>
    method:<br/>
        <input id="get" type="radio" name="_method" value="get" checked="checked"/><label for="get">GET</label><br/>
        <input id="post" type="radio" name="_method" value="post"/><label for="post">POST</label>
    <table>
        <tr>
            <td>key</td>
            <td>value</td>
        </tr><tr>
            <td><input type="text" onblur="$('#key1').attr({name: this.value});"/></td>
            <td><input type="text" id="key1"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key2').attr({name: this.value});"/></td>
            <td><input type="text" id="key2"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key3').attr({name: this.value});"/></td>
            <td><input type="text" id="key3"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key4').attr({name: this.value});"/></td>
            <td><input type="text" id="key4"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key5').attr({name: this.value});"/></td>
            <td><input type="text" id="key5"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key6').attr({name: this.value});"/></td>
            <td><input type="file" id="key6"/></td>
        </tr>
        <tr>
            <td><button type="button" class="submitbutton" onclick="submitTest()">ajax提交</button></td>
            <td><input type="submit" class="submitbutton" onclick="beforeSubmit()" value="带文件提交"/></td>
        </tr>
        <tr>
            <td><input type="text" onblur="$('#key11').attr({name: this.value});"/></td>
            <td><input type="text" id="key11"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key12').attr({name: this.value});"/></td>
            <td><input type="text" id="key12"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key13').attr({name: this.value});"/></td>
            <td><input type="text" id="key13"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key14').attr({name: this.value});"/></td>
            <td><input type="text" id="key14"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key15').attr({name: this.value});"/></td>
            <td><input type="text" id="key15"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key16').attr({name: this.value});"/></td>
            <td><input type="file" id="key16"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key21').attr({name: this.value});"/></td>
            <td><input type="text" id="key21"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key22').attr({name: this.value});"/></td>
            <td><input type="text" id="key22"/></td>
        </tr><tr>
            <td><input type="text" onblur="$('#key23').attr({name: this.value});"/></td>
            <td><input type="text" id="key23"/></td>
        </tr>
    </table>
</form>
</div>
<div id="right" class="fl">
    <div class="fl">
        <span>结果：</span>
    </div>
    <div class="fl">
        <iframe id="resultiframe">    
        </iframe>
    </div>
</div>
<script>
    resultiframe = document.getElementById('resultiframe');
    url = document.getElementById('url');
    testform = document.getElementById('testform');
    function submitTest(){
        resultiframe.src = url.value + '?' + $('#testform').serialize();
    }
    document.body.onkeydown=function(){
        if(event.keyCode==13){
            event.preventDefault();
            submitTest();
        }
    }
    function beforeSubmit(){
        testform.action = url.value;
    }
</script>
</body>
</html>